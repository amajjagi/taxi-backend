<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/datepicker/0.6.5/datepicker.min.css" rel="stylesheet"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/datepicker/0.6.5/datepicker.min.js"></script>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCYffzg1pp9t0Nw9bjsehziug-GJANV-u0&libraries=places"></script>

    <script type="text/javascript">
        var origin, destination;
        var direction = new google.maps.DirectionsRenderer;
        var directionsService = new google.maps.DirectionsService;
        google.maps.event.addDomListener(window, 'load', function () {
            new google.maps.places.SearchBox(document.getElementById('origin'));
            new google.maps.places.SearchBox(document.getElementById('destination'));
            
        });
    
        function get_rout() {
            var mapOptions = {
                mapTypeControl: false,
                center: {lat: -100.8688, lng: 151.2195},
                zoom: 20
            };
            
            map = new google.maps.Map(document.getElementById('maplocation'), mapOptions);
            darection.setMap(map);
            darection.setPanel(document.getElementById('panallocation'));
    
    
            origin = document.getElementById("origin").value;
            destination = document.getElementById("destination").value;
    
            var request = {
                origin: origin,
                destination: destination,
                travelMode: google.maps.TravelMode.DRIVING
            };
            directionsService.route(request, function (response, status) {
                if (status == google.maps.DirectionsStatus.OK) {
                    darection.setDirections(response);
                }
            });
    
            var service = new google.maps.DistanceMatrixService();
            service.getDistanceMatrix({
                origins: [origin],
                destinations: [destination],
                travelMode: google.maps.TravelMode.DRIVING,
                unitSystem: google.maps.UnitSystem.METRIC,
                avoidHighways: false,
                avoidTolls: false
            }, function (response, status) {
                if (status == google.maps.DistanceMatrixStatus.OK && response.rows[0].elements[0].status != "ZERO_RESULTS") {
                    var distance = response.rows[0].elements[0].distance.text;
                    var duration = response.rows[0].elements[0].duration.text;
                    
                    distancefinel = distance.split(" ");
                    $('.distance').val(distancefinel[0]);
                    
                    
                    
                } else {
                    alert("Unable to find the distance between selected locations");
                }
            });
        }
    </script>

    <script>
        function initialize() {
  var input = document.getElementById('origin');
  var input1 = document.getElementById('destination');
  new google.maps.places.Autocomplete(input1);

  new google.maps.places.Autocomplete(input);
}

google.maps.event.addDomListener(window, 'load', initialize);
    $(function() {
        $( "#datepicker" ).datepicker({ startDate: new Date()});
     }); 
    </script>   
    <title>Document</title>
</head>
<body>
    <div class="container">
    <form action="../out" method="POST" id="myform" name="myform">
        <h1 style="text-align: center ;">My From</h1>
            <div class="items">
                <label >Select Origin:</label>
                <input type="text" name="origin" id="origin" placeholder="Select origin" required>
    </div><br/>
        
    <div class="items"> 
        <label >Destination</label>
        <input type="text" name="destination" id="destination"  placeholder="Select Destination" required>
    </div><br/>
    <div class="items">  
        <label >Depart Date</label>
        <input type="text" name="datepicker" id="datepicker" placeholder="Depart Date" required>
    

    </div><br/>
</br>&nbsp;</br>
<div class="form-group col-md-6">

<button type="button" value="Get Route" onclick="get_rout()" >Get Rout & Distance</button>
</div>
<div class="form-group col-md-6">
  <label for="pwd">Distance in km :</label>
  <input type="text" class="form-control distance" readonly >
</div>
   <br/><center><button class="button"type="submit">Book</button></center>
    
   
    </form>
</div>
</body>
</html>
